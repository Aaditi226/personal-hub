<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aaditi's Library Hub - Offline</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Playfair+Display:wght@700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .font-display { 
            font-family: 'Playfair Display', Georgia, serif; 
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #667eea; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #764ba2; }
        
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .btn-primary:active {
            transform: scale(0.98);
        }
        
        .book-cover {
            position: relative;
            overflow: hidden;
        }
        
        .book-cover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .book-cover:hover::before {
            left: 100%;
        }
        
        .animate-slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tab-indicator {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Welcome Screen Animations */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .pulse-slow {
            animation: pulse-slow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-slow {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            animation: gradient-shift 8s ease infinite;
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .book-float {
            animation: book-float 4s ease-in-out infinite;
        }
        
        @keyframes book-float {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }
        
        .sparkle {
            animation: sparkle 2s ease-in-out infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        .welcome-stat-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .welcome-stat-card:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
        }
        
        .fadeIn {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .fadeInUp {
            animation: fadeInUp 0.6s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hidden { display: none; }
        .block { display: block; }
        .flex { display: flex; }
        .grid { display: grid; }
        .sticky { position: sticky; }
        .fixed { position: fixed; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
        .z-10 { z-index: 10; }
        .z-40 { z-index: 40; }
        .z-50 { z-index: 50; }
        
        /* Utility classes */
        .container { max-width: 1280px; margin: 0 auto; }
        .text-center { text-align: center; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-5 { gap: 1.25rem; }
        .gap-6 { gap: 1.5rem; }
        .flex-1 { flex: 1; }
        .flex-col { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-shrink-0 { flex-shrink: 0; }
        
        .w-full { width: 100%; }
        .min-w-0 { min-width: 0; }
        .h-full { height: 100%; }
        .min-h-screen { min-height: 100vh; }
        
        .p-4 { padding: 1rem; }
        .p-5 { padding: 1.25rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-5 { padding-left: 1.25rem; padding-right: 1.25rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .py-5 { padding-top: 1.25rem; padding-bottom: 1.25rem; }
        .py-12 { padding-top: 3rem; padding-bottom: 3rem; }
        .pb-24 { padding-bottom: 6rem; }
        .pt-2 { padding-top: 0.5rem; }
        .pt-4 { padding-top: 1rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mb-12 { margin-bottom: 3rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-8 { margin-top: 2rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-2xl { border-radius: 1rem; }
        .rounded-3xl { border-radius: 1.5rem; }
        .rounded-full { border-radius: 9999px; }
        
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
        .shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
        .text-5xl { font-size: 3rem; line-height: 1; }
        
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-extrabold { font-weight: 800; }
        
        .text-white { color: #ffffff; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-800 { color: #1f2937; }
        .text-purple-200 { color: #e9d5ff; }
        .text-purple-400 { color: #c084fc; }
        .text-purple-500 { color: #a855f7; }
        .text-purple-600 { color: #9333ea; }
        
        .bg-white { background-color: #ffffff; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-purple-50 { background-color: #faf5ff; }
        .bg-purple-100 { background-color: #f3e8ff; }
        
        .border { border-width: 1px; }
        .border-2 { border-width: 2px; }
        .border-t { border-top-width: 1px; }
        .border-gray-200 { border-color: #e5e7eb; }
        .border-gray-300 { border-color: #d1d5db; }
        .border-purple-100 { border-color: #f3e8ff; }
        .border-purple-300 { border-color: #d8b4fe; }
        .border-dashed { border-style: dashed; }
        
        .outline-none { outline: 2px solid transparent; }
        .cursor-pointer { cursor: pointer; }
        
        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }
        
        .line-clamp-3 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
        }
        
        .leading-relaxed { line-height: 1.625; }
        .leading-tight { line-height: 1.25; }
        .tracking-tight { letter-spacing: -0.025em; }
        .tracking-wider { letter-spacing: 0.05em; }
        .uppercase { text-transform: uppercase; }
        .italic { font-style: italic; }
        
        .overflow-hidden { overflow: hidden; }
        .resize-none { resize: none; }
        
        input, textarea, button {
            font-family: inherit;
        }
        
        button {
            user-select: none;
            -webkit-user-select: none;
        }
        
        .top-0 { top: 0; }
        
        /* Responsive Grid */
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        
        /* Responsive utilities */
        @media (min-width: 640px) {
            .sm\\:px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
            .sm\\:py-5 { padding-top: 1.25rem; padding-bottom: 1.25rem; }
            .sm\\:py-8 { padding-top: 2rem; padding-bottom: 2rem; }
            .sm\\:p-6 { padding: 1.5rem; }
            .sm\\:p-8 { padding: 2rem; }
            .sm\\:mb-4 { margin-bottom: 1rem; }
            .sm\\:mb-8 { margin-bottom: 2rem; }
            .sm\\:mb-12 { margin-bottom: 3rem; }
            .sm\\:gap-4 { gap: 1rem; }
            .sm\\:gap-5 { gap: 1.25rem; }
            .sm\\:gap-6 { gap: 1.5rem; }
            .sm\\:text-xs { font-size: 0.75rem; line-height: 1rem; }
            .sm\\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
            .sm\\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .sm\\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .sm\\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .sm\\:text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
            .sm\\:text-5xl { font-size: 3rem; line-height: 1; }
            .sm\\:py-4 { padding-top: 1rem; padding-bottom: 1rem; }
            .sm\\:py-5 { padding-top: 1.25rem; padding-bottom: 1.25rem; }
            .sm\\:w-28 { width: 7rem; }
            .sm\\:w-32 { width: 8rem; }
            .sm\\:h-32 { height: 8rem; }
            .sm\\:h-40 { height: 10rem; }
            .sm\\:h-44 { height: 11rem; }
            .sm\\:rounded-2xl { border-radius: 1rem; }
            .sm\\:rounded-3xl { border-radius: 1.5rem; }
            .sm\\:flex-row { flex-direction: row; }
            .sm\\:text-left { text-align: left; }
            .sm\\:w-auto { width: auto; }
            .sm\\:line-clamp-3 {
                -webkit-line-clamp: 3;
            }
            .sm\\:py-20 { padding-top: 5rem; padding-bottom: 5rem; }
        }
        
        @media (min-width: 1024px) {
            .lg\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        
        .space-y-5 > * + * { margin-top: 1.25rem; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        
        input:focus, textarea:focus {
            border-color: #9333ea;
            background-color: #ffffff;
        }
        
        .hover\\:text-purple-600:hover { color: #9333ea; }
        .hover\\:text-red-500:hover { color: #ef4444; }
        .hover\\:bg-purple-50:hover { background-color: #faf5ff; }
        .hover\\:bg-red-50:hover { background-color: #fef2f2; }
        .hover\\:border-gray-400:hover { border-color: #9ca3af; }
        .hover\\:border-purple-500:hover { border-color: #a855f7; }
        .hover\\:scale-105:hover { transform: scale(1.05); }
        
        .active\\:scale-95:active { transform: scale(0.95); }
        
        .max-w-2xl { max-width: 42rem; }
        .max-w-md { max-width: 28rem; }
        .max-w-lg { max-width: 32rem; }
        .max-w-6xl { max-width: 72rem; }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // Simple localStorage wrapper
        const storage = {
            get: (key) => {
                try {
                    return JSON.parse(localStorage.getItem(key));
                } catch {
                    return null;
                }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, JSON.stringify(value));
                    return true;
                } catch {
                    return false;
                }
            },
            remove: (key) => {
                try {
                    localStorage.removeItem(key);
                    return true;
                } catch {
                    return false;
                }
            }
        };

        // App State
        let state = {
            showWelcome: !localStorage.getItem('aaditi_has_visited'),
            activeTab: 'read',
            showForm: false,
            editingBook: null,
            booksRead: storage.get('aaditi_books_read') || [],
            suggestions: storage.get('aaditi_suggestions') || []
        };

        // Save data to localStorage
        function saveData() {
            storage.set('aaditi_books_read', state.booksRead);
            storage.set('aaditi_suggestions', state.suggestions);
        }

        // Update state and re-render
        function setState(updates) {
            state = { ...state, ...updates };
            render();
        }

        // Icon Components (as SVG strings)
        const icons = {
            book: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>',
            bookOpen: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>',
            lightbulb: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7z"/><path d="M9 21h6"/><path d="M10 18h4"/></svg>',
            edit: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>',
            trash: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>',
            plus: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>',
            star: '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>',
            check: '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>',
            arrow: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>'
        };

        // Welcome Screen
        function renderWelcomeScreen() {
            return `
                <div class="fixed inset-0 z-50 gradient-bg flex flex-col items-center justify-center p-4 sm:p-8 text-center overflow-hidden">
                    <div class="absolute" style="top: 2.5rem; left: 2.5rem; width: 5rem; height: 5rem; background: rgba(255,255,255,0.1); border-radius: 50%; filter: blur(40px); animation: pulse-slow 2s ease-in-out infinite;"></div>
                    <div class="absolute" style="top: 10rem; right: 5rem; width: 8rem; height: 8rem; background: rgba(255,255,255,0.1); border-radius: 50%; filter: blur(40px); animation: pulse-slow 2s ease-in-out infinite 1s;"></div>
                    <div class="absolute" style="bottom: 5rem; left: 25%; width: 6rem; height: 6rem; background: rgba(255,255,255,0.1); border-radius: 50%; filter: blur(40px); animation: pulse-slow 2s ease-in-out infinite 2s;"></div>
                    
                    <div class="relative z-10" style="max-width: 42rem; width: 100%;">
                        <div class="floating mb-8 sm:mb-12">
                            <div class="bg-white rounded-3xl mx-auto flex items-center justify-center shadow-2xl book-float relative" style="width: 6rem; height: 6rem;">
                                <div class="text-purple-600" style="transform: scale(1.5);">
                                    ${icons.bookOpen}
                                </div>
                                <div class="absolute bg-yellow-300 rounded-full sparkle" style="top: -0.5rem; right: -0.5rem; width: 1rem; height: 1rem;"></div>
                                <div class="absolute bg-pink-300 rounded-full sparkle" style="bottom: -0.5rem; left: -0.5rem; width: 0.75rem; height: 0.75rem; animation-delay: 0.5s;"></div>
                                <div class="absolute bg-blue-300 rounded-full sparkle" style="top: 50%; right: -0.75rem; width: 0.5rem; height: 0.5rem; animation-delay: 1s;"></div>
                            </div>
                        </div>

                        <h1 class="text-white text-4xl sm:text-5xl font-display font-bold mb-3 sm:mb-4 tracking-tight fadeIn px-4">
                            Aaditi's Library
                        </h1>
                        <p class="text-purple-200 font-medium text-base sm:text-lg mb-8 sm:mb-12 max-w-lg mx-auto leading-relaxed fadeIn px-4">
                            Your personal sanctuary for books read and reading inspirations
                        </p>

                        <div class="grid grid-cols-2 gap-3 sm:gap-4 mb-8 sm:mb-12 max-w-md mx-auto px-4 fadeInUp">
                            <div class="welcome-stat-card rounded-2xl sm:rounded-3xl p-4 sm:p-6 text-white">
                                <div class="text-3xl sm:text-4xl font-bold mb-1 sm:mb-2">${state.booksRead.length}</div>
                                <div class="text-xs sm:text-sm font-semibold text-purple-200">Books Read</div>
                            </div>
                            <div class="welcome-stat-card rounded-2xl sm:rounded-3xl p-4 sm:p-6 text-white">
                                <div class="text-3xl sm:text-4xl font-bold mb-1 sm:mb-2">${state.suggestions.length}</div>
                                <div class="text-xs sm:text-sm font-semibold text-purple-200">To Read</div>
                            </div>
                        </div>

                        <div class="fadeInUp px-4">
                            <button 
                                onclick="handleStartApp()"
                                class="btn-primary text-white px-8 sm:px-12 py-4 sm:py-5 rounded-2xl sm:rounded-3xl font-bold text-base sm:text-lg shadow-2xl w-full sm:w-auto flex items-center justify-center gap-3"
                            >
                                <span>Enter Library</span>
                                ${icons.arrow}
                            </button>
                            
                            <div class="mt-8 sm:mt-12 flex flex-wrap justify-center gap-3 sm:gap-6 text-xs sm:text-sm" style="color: rgba(255,255,255,0.8);">
                                <div class="flex items-center gap-2">
                                    ${icons.check}
                                    <span>Track Books</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    ${icons.check}
                                    <span>Save Quotes</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    ${icons.check}
                                    <span>Write Reviews</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Book Card
        function renderBookCard(book, type) {
            return `
                <div class="bg-white rounded-2xl sm:rounded-3xl overflow-hidden card-hover shadow-lg animate-slide-up">
                    <div class="p-4 sm:p-6 flex gap-3 sm:gap-5">
                        <div class="bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl sm:rounded-2xl overflow-hidden flex-shrink-0 shadow-md book-cover" style="width: 5rem; height: 7rem;">
                            ${book.photo ? 
                                `<img src="${book.photo}" class="w-full h-full" style="object-fit: cover;" alt="${book.title}" />` :
                                `<div class="flex h-full items-center justify-center text-purple-300">${icons.book}</div>`
                            }
                        </div>
                        
                        <div class="flex-1 min-w-0">
                            <h4 class="font-bold text-base sm:text-xl text-gray-800 mb-1 line-clamp-2 leading-tight">
                                ${book.title}
                            </h4>
                            <p class="text-xs sm:text-sm font-semibold text-purple-500 mb-2 sm:mb-3">
                                by ${book.author}
                            </p>
                            
                            ${book.review ? `
                                <p class="text-xs sm:text-sm text-gray-600 line-clamp-2 sm:line-clamp-3 leading-relaxed mb-3 sm:mb-4">
                                    ${book.review}
                                </p>
                            ` : ''}
                            
                            <div class="flex gap-2 sm:gap-3 mt-3 sm:mt-4">
                                <button 
                                    onclick="handleEdit('${type}', ${book.id})"
                                    class="flex items-center gap-1 text-xs font-bold text-gray-500 hover:text-purple-600 px-2 sm:px-3 py-2 rounded-lg hover:bg-purple-50"
                                    style="transition: all 0.2s;"
                                >
                                    ${icons.edit} Edit
                                </button>
                                <button 
                                    onclick="handleDelete('${type}', ${book.id})"
                                    class="flex items-center gap-1 text-xs font-bold text-gray-500 hover:text-red-500 px-2 sm:px-3 py-2 rounded-lg hover:bg-red-50"
                                    style="transition: all 0.2s;"
                                >
                                    ${icons.trash} Delete
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    ${book.quotes && type === 'read' ? `
                        <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-4 sm:p-5 border-t border-purple-100">
                            <div class="flex items-start gap-2">
                                <div class="text-purple-400 flex-shrink-0" style="margin-top: 0.125rem;">
                                    ${icons.star}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs font-bold text-purple-600 uppercase tracking-wider mb-1">
                                        Favorite Quote
                                    </p>
                                    <p class="text-xs sm:text-sm text-gray-700 italic leading-relaxed">
                                        "${book.quotes}"
                                    </p>
                                </div>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // Book Form
        function renderBookForm() {
            const book = state.editingBook;
            const type = state.activeTab;
            const formData = book || { title: '', author: '', quotes: '', review: '', photo: null };
            
            return `
                <div class="max-w-2xl mx-auto p-4 sm:p-6 animate-slide-up">
                    <div class="bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-5 sm:p-8">
                        <h3 class="text-2xl sm:text-3xl font-display font-bold mb-6 sm:mb-8 gradient-text">
                            ${book ? '‚úèÔ∏è Edit Book' : `üìö Add ${type === 'read' ? 'Book Read' : 'Reading Suggestion'}`}
                        </h3>

                        <form onsubmit="handleSaveBook(event)" class="space-y-5 sm:space-y-6">
                            <!-- Photo Upload -->
                            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6">
                                <label class="bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl sm:rounded-2xl flex items-center justify-center overflow-hidden cursor-pointer border-2 border-dashed border-purple-300 hover:border-purple-500 book-cover flex-shrink-0 mx-auto sm:mx-0" style="width: 6rem; height: 8rem; transition: all 0.3s;">
                                    ${formData.photo ? 
                                        `<img id="previewImage" src="${formData.photo}" class="w-full h-full" style="object-fit: cover;" alt="Book cover" />` :
                                        `<div id="previewImage" class="text-purple-400 text-center p-4">
                                            ${icons.book}
                                            <span class="text-xs font-bold block" style="margin-top: 0.5rem;">Add Cover</span>
                                        </div>`
                                    }
                                    <input 
                                        type="file" 
                                        id="photoInput"
                                        style="display: none;"
                                        onchange="handlePhotoUpload(event)"
                                        accept="image/*"
                                    />
                                </label>
                                <div class="flex-1 text-center sm:text-left">
                                    <p class="text-sm font-bold text-gray-700 mb-1">Book Cover Image</p>
                                    <p class="text-xs text-gray-500 leading-relaxed">
                                        Upload a beautiful cover image to make your library visually stunning
                                    </p>
                                </div>
                            </div>

                            <!-- Title -->
                            <div>
                                <label class="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                    Book Title *
                                </label>
                                <input
                                    type="text"
                                    id="titleInput"
                                    required
                                    class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none text-sm sm:text-base"
                                    placeholder="e.g., The Alchemist"
                                    value="${formData.title}"
                                />
                            </div>

                            <!-- Author -->
                            <div>
                                <label class="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                    Author Name *
                                </label>
                                <input
                                    type="text"
                                    id="authorInput"
                                    required
                                    class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none text-sm sm:text-base"
                                    placeholder="e.g., Paulo Coelho"
                                    value="${formData.author}"
                                />
                            </div>

                            ${type === 'read' ? `
                                <!-- Quotes -->
                                <div>
                                    <label class="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                        Favorite Quotes
                                    </label>
                                    <textarea
                                        id="quotesInput"
                                        class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none resize-none text-sm sm:text-base"
                                        style="height: 6rem;"
                                        placeholder="Share the most memorable lines from this book..."
                                    >${formData.quotes || ''}</textarea>
                                </div>
                            ` : ''}

                            <!-- Review -->
                            <div>
                                <label class="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                    ${type === 'read' ? 'Your Review' : 'Why Read This?'}
                                </label>
                                <textarea
                                    id="reviewInput"
                                    class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none resize-none text-sm sm:text-base"
                                    style="height: 8rem;"
                                    placeholder="${type === 'read' ? 
                                        'What did you think about this book? Share your thoughts...' : 
                                        'Why should you read this book? What makes it interesting?'}"
                                >${formData.review || ''}</textarea>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2 sm:pt-4">
                                <button
                                    type="submit"
                                    class="flex-1 btn-primary text-white py-4 rounded-xl sm:rounded-2xl font-bold shadow-lg text-sm sm:text-base"
                                >
                                    ${book ? 'Update Book' : 'Save to Library'}
                                </button>
                                <button
                                    type="button"
                                    onclick="handleCancelForm()"
                                    class="px-6 sm:px-8 py-4 rounded-xl sm:rounded-2xl font-bold text-gray-600 border-2 border-gray-300 hover:border-gray-400 text-sm sm:text-base"
                                    style="transition: all 0.2s;"
                                >
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
        }

        // Main App
        function renderMainApp() {
            const currentBooks = state.activeTab === 'read' ? state.booksRead : state.suggestions;
            
            return `
                <div class="min-h-screen pb-24">
                    <!-- Header -->
                    <header class="glass sticky top-0 z-40 shadow-lg">
                        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-4 sm:py-5">
                            <div class="flex justify-between items-center mb-3 sm:mb-4">
                                <div>
                                    <h1 class="text-xl sm:text-2xl font-display font-bold gradient-text">
                                        Aaditi's Library
                                    </h1>
                                    <p class="text-xs text-purple-600 font-semibold" style="margin-top: 0.125rem;">
                                        Personal Book Collection
                                    </p>
                                </div>
                                ${!state.showForm ? `
                                    <button
                                        onclick="handleAddNew()"
                                        class="btn-primary text-white px-4 sm:px-6 py-3 rounded-xl font-bold shadow-lg flex items-center gap-2 text-sm sm:text-base"
                                    >
                                        ${icons.plus}
                                        <span class="hidden sm:inline">Add Book</span>
                                        <span class="inline sm:hidden">Add</span>
                                    </button>
                                ` : ''}
                            </div>

                            ${!state.showForm ? `
                                <!-- Tabs -->
                                <div class="flex gap-2 bg-gray-100 p-1 sm:p-2 rounded-xl sm:rounded-2xl relative">
                                    <div 
                                        class="absolute bg-white rounded-lg sm:rounded-xl shadow-md tab-indicator"
                                        style="top: 0.25rem; bottom: 0.25rem; left: ${state.activeTab === 'read' ? '0.25rem' : '50%'}; width: calc(50% - 0.25rem);"
                                    ></div>
                                    <button
                                        onclick="handleTabChange('read')"
                                        class="flex-1 py-3 px-2 sm:px-4 rounded-lg sm:rounded-xl font-bold text-xs sm:text-sm flex items-center justify-center gap-2 relative z-10 ${state.activeTab === 'read' ? 'text-purple-600' : 'text-gray-500'}"
                                        style="transition: color 0.2s;"
                                    >
                                        ${icons.bookOpen}
                                        <span class="hidden sm:inline">Books Read (${state.booksRead.length})</span>
                                        <span class="inline sm:hidden">Read (${state.booksRead.length})</span>
                                    </button>
                                    <button
                                        onclick="handleTabChange('suggestions')"
                                        class="flex-1 py-3 px-2 sm:px-4 rounded-lg sm:rounded-xl font-bold text-xs sm:text-sm flex items-center justify-center gap-2 relative z-10 ${state.activeTab === 'suggestions' ? 'text-purple-600' : 'text-gray-500'}"
                                        style="transition: color 0.2s;"
                                    >
                                        ${icons.lightbulb}
                                        <span class="hidden sm:inline">Reading List (${state.suggestions.length})</span>
                                        <span class="inline sm:hidden">List (${state.suggestions.length})</span>
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    </header>

                    <!-- Main Content -->
                    <main class="max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8">
                        ${state.showForm ? renderBookForm() : `
                            ${currentBooks.length === 0 ? `
                                <div class="text-center py-12 sm:py-20">
                                    <div class="bg-white rounded-2xl sm:rounded-3xl p-8 sm:p-12 max-w-md mx-auto shadow-lg">
                                        <div class="bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6" style="width: 4rem; height: 4rem;">
                                            <div class="text-purple-400">
                                                ${state.activeTab === 'read' ? icons.bookOpen : icons.lightbulb}
                                            </div>
                                        </div>
                                        <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-3">
                                            ${state.activeTab === 'read' ? 'No Books Read Yet' : 'No Reading Suggestions'}
                                        </h3>
                                        <p class="text-sm sm:text-base text-gray-500 mb-5 sm:mb-6 leading-relaxed px-2">
                                            ${state.activeTab === 'read' 
                                                ? 'Start building your reading collection by adding your first book!' 
                                                : 'Create a list of books you want to read in the future!'}
                                        </p>
                                        <button
                                            onclick="handleAddNew()"
                                            class="btn-primary text-white px-6 sm:px-8 py-3 rounded-xl font-bold shadow-lg text-sm sm:text-base"
                                        >
                                            Add Your First Book
                                        </button>
                                    </div>
                                </div>
                            ` : `
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
                                    ${currentBooks.map(book => renderBookCard(book, state.activeTab)).join('')}
                                </div>
                            `}
                        `}
                    </main>
                </div>
            `;
        }

        // Event Handlers
        function handleStartApp() {
            localStorage.setItem('aaditi_has_visited', 'true');
            setState({ showWelcome: false });
        }

        function handleTabChange(tab) {
            setState({ activeTab: tab });
        }

        function handleAddNew() {
            setState({ showForm: true, editingBook: null });
        }

        function handleCancelForm() {
            setState({ showForm: false, editingBook: null });
        }

        function handleEdit(type, id) {
            const books = type === 'read' ? state.booksRead : state.suggestions;
            const book = books.find(b => b.id === id);
            setState({ showForm: true, editingBook: book, activeTab: type });
        }

        function handleDelete(type, id) {
            if (!confirm('Are you sure you want to delete this book?')) return;
            
            if (type === 'read') {
                state.booksRead = state.booksRead.filter(b => b.id !== id);
            } else {
                state.suggestions = state.suggestions.filter(s => s.id !== id);
            }
            saveData();
            render();
        }

        let currentPhoto = null;

        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onloadend = function() {
                currentPhoto = reader.result;
                const preview = document.getElementById('previewImage');
                if (preview) {
                    preview.innerHTML = `<img src="${currentPhoto}" class="w-full h-full" style="object-fit: cover;" alt="Book cover" />`;
                }
            };
            reader.readAsDataURL(file);
        }

        function handleSaveBook(event) {
            event.preventDefault();
            
            const title = document.getElementById('titleInput').value.trim();
            const author = document.getElementById('authorInput').value.trim();
            const quotesInput = document.getElementById('quotesInput');
            const quotes = quotesInput ? quotesInput.value.trim() : '';
            const review = document.getElementById('reviewInput').value.trim();
            
            if (!title || !author) {
                alert('Please fill in both Title and Author fields.');
                return;
            }
            
            const bookData = {
                id: state.editingBook ? state.editingBook.id : Date.now(),
                title,
                author,
                quotes,
                review,
                photo: currentPhoto || (state.editingBook ? state.editingBook.photo : null)
            };
            
            if (state.activeTab === 'read') {
                if (state.editingBook) {
                    state.booksRead = state.booksRead.map(b => 
                        b.id === state.editingBook.id ? bookData : b
                    );
                } else {
                    state.booksRead = [bookData, ...state.booksRead];
                }
            } else {
                if (state.editingBook) {
                    state.suggestions = state.suggestions.map(s => 
                        s.id === state.editingBook.id ? bookData : s
                    );
                } else {
                    state.suggestions = [bookData, ...state.suggestions];
                }
            }
            
            saveData();
            currentPhoto = null;
            setState({ showForm: false, editingBook: null });
        }

        // Main render function
        function render() {
            const app = document.getElementById('app');
            if (state.showWelcome) {
                app.innerHTML = renderWelcomeScreen();
            } else {
                app.innerHTML = renderMainApp();
            }
        }

        // Initialize app
        render();
    </script>
</body>
</html>