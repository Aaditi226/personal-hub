<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aaditi's Library Hub</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Playfair+Display:wght@700;800;900&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .font-display { font-family: 'Playfair Display', serif; }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #667eea; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #764ba2; }
        
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .btn-primary:active {
            transform: scale(0.98);
        }
        
        .book-cover {
            position: relative;
            overflow: hidden;
        }
        
        .book-cover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .book-cover:hover::before {
            left: 100%;
        }
        
        .animate-slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tab-indicator {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Welcome Screen Animations */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .pulse-slow {
            animation: pulse-slow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-slow {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            animation: gradient-shift 8s ease infinite;
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .book-float {
            animation: book-float 4s ease-in-out infinite;
        }
        
        @keyframes book-float {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }
        
        .sparkle {
            animation: sparkle 2s ease-in-out infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        .welcome-stat-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .welcome-stat-card:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const IconBook = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            </svg>
        );
        
        const IconBookOpen = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
            </svg>
        );
        
        const IconLightbulb = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7z"/>
                <path d="M9 21h6"/>
                <path d="M10 18h4"/>
            </svg>
        );
        
        const IconEdit = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
        );
        
        const IconTrash = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
        );
        
        const IconPlus = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );
        
        const IconStar = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
        );

        // Welcome Screen
        const WelcomeScreen = ({ onStart, booksReadCount, suggestionsCount }) => (
            <div className="fixed inset-0 z-50 gradient-bg flex flex-col items-center justify-center p-4 sm:p-8 text-center overflow-hidden">
                {/* Floating Background Elements */}
                <div className="absolute top-10 left-10 w-20 h-20 bg-white/10 rounded-full blur-xl pulse-slow" style={{animationDelay: '0s'}}></div>
                <div className="absolute top-40 right-20 w-32 h-32 bg-white/10 rounded-full blur-xl pulse-slow" style={{animationDelay: '1s'}}></div>
                <div className="absolute bottom-20 left-1/4 w-24 h-24 bg-white/10 rounded-full blur-xl pulse-slow" style={{animationDelay: '2s'}}></div>
                <div className="absolute bottom-40 right-1/3 w-28 h-28 bg-white/10 rounded-full blur-xl pulse-slow" style={{animationDelay: '1.5s'}}></div>
                
                {/* Main Content */}
                <div className="relative z-10 max-w-2xl w-full">
                    {/* Animated Book Icon */}
                    <div className="floating mb-8 sm:mb-12">
                        <div className="w-24 h-24 sm:w-32 sm:h-32 bg-white rounded-[2rem] sm:rounded-[2.5rem] mx-auto flex items-center justify-center shadow-2xl book-float relative">
                            <div className="text-purple-600 scale-125">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                                </svg>
                            </div>
                            {/* Sparkle Effects */}
                            <div className="absolute -top-2 -right-2 w-4 h-4 bg-yellow-300 rounded-full sparkle" style={{animationDelay: '0s'}}></div>
                            <div className="absolute -bottom-2 -left-2 w-3 h-3 bg-pink-300 rounded-full sparkle" style={{animationDelay: '0.5s'}}></div>
                            <div className="absolute top-1/2 -right-3 w-2 h-2 bg-blue-300 rounded-full sparkle" style={{animationDelay: '1s'}}></div>
                        </div>
                    </div>

                    {/* Title */}
                    <h1 className="text-white text-4xl sm:text-5xl md:text-6xl font-display font-bold mb-3 sm:mb-4 tracking-tight animate__animated animate__fadeIn px-4">
                        Aaditi's Library
                    </h1>
                    <p className="text-purple-200 font-medium text-base sm:text-lg md:text-xl mb-8 sm:mb-12 max-w-lg mx-auto leading-relaxed animate__animated animate__fadeIn px-4" style={{animationDelay: '0.2s'}}>
                        Your personal sanctuary for books read and reading inspirations
                    </p>

                    {/* Stats Cards */}
                    <div className="grid grid-cols-2 gap-3 sm:gap-4 mb-8 sm:mb-12 max-w-md mx-auto px-4 animate__animated animate__fadeInUp" style={{animationDelay: '0.4s'}}>
                        <div className="welcome-stat-card rounded-2xl sm:rounded-3xl p-4 sm:p-6 text-white">
                            <div className="text-3xl sm:text-4xl font-bold mb-1 sm:mb-2">{booksReadCount}</div>
                            <div className="text-xs sm:text-sm font-semibold text-purple-200">Books Read</div>
                        </div>
                        <div className="welcome-stat-card rounded-2xl sm:rounded-3xl p-4 sm:p-6 text-white">
                            <div className="text-3xl sm:text-4xl font-bold mb-1 sm:mb-2">{suggestionsCount}</div>
                            <div className="text-xs sm:text-sm font-semibold text-purple-200">To Read</div>
                        </div>
                    </div>

                    {/* Action Button */}
                    <div className="animate__animated animate__fadeInUp px-4" style={{animationDelay: '0.6s'}}>
                        <button 
                            onClick={onStart}
                            className="bg-white text-purple-600 px-8 sm:px-12 py-4 sm:py-5 rounded-2xl sm:rounded-3xl font-bold text-base sm:text-lg shadow-2xl hover:shadow-3xl transition-all hover:scale-105 active:scale-95 w-full sm:w-auto"
                        >
                            <span className="flex items-center justify-center gap-2 sm:gap-3">
                                <span>Enter Library</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </span>
                        </button>
                        
                        {/* Feature Highlights */}
                        <div className="mt-8 sm:mt-12 flex flex-wrap justify-center gap-3 sm:gap-6 text-white/80 text-xs sm:text-sm">
                            <div className="flex items-center gap-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                                <span>Track Books</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                                <span>Save Quotes</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                                <span>Write Reviews</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );

        // Book Card Component
        const BookCard = ({ book, onEdit, onDelete, type }) => (
            <div className="bg-white rounded-2xl sm:rounded-3xl overflow-hidden card-hover shadow-lg animate-slide-up">
                <div className="p-4 sm:p-6 flex gap-3 sm:gap-5">
                    <div className="w-20 sm:w-28 h-28 sm:h-40 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl sm:rounded-2xl overflow-hidden flex-shrink-0 shadow-md book-cover">
                        {book.photo ? (
                            <img src={book.photo} className="w-full h-full object-cover" alt={book.title} />
                        ) : (
                            <div className="flex h-full items-center justify-center text-purple-300">
                                <IconBook />
                            </div>
                        )}
                    </div>
                    
                    <div className="flex-1 min-w-0">
                        <h4 className="font-bold text-base sm:text-xl text-gray-800 mb-1 line-clamp-2 leading-tight">
                            {book.title}
                        </h4>
                        <p className="text-xs sm:text-sm font-semibold text-purple-500 mb-2 sm:mb-3">
                            by {book.author}
                        </p>
                        
                        {book.review && (
                            <p className="text-xs sm:text-sm text-gray-600 line-clamp-2 sm:line-clamp-3 leading-relaxed mb-3 sm:mb-4">
                                {book.review}
                            </p>
                        )}
                        
                        <div className="flex gap-2 sm:gap-3 mt-3 sm:mt-4">
                            <button 
                                onClick={() => onEdit(book)}
                                className="flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs font-bold text-gray-500 hover:text-purple-600 transition-colors px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg hover:bg-purple-50"
                            >
                                <IconEdit /> Edit
                            </button>
                            <button 
                                onClick={() => onDelete(book.id)}
                                className="flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs font-bold text-gray-500 hover:text-red-500 transition-colors px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg hover:bg-red-50"
                            >
                                <IconTrash /> Delete
                            </button>
                        </div>
                    </div>
                </div>
                
                {book.quotes && type === 'read' && (
                    <div className="bg-gradient-to-r from-purple-50 to-pink-50 p-4 sm:p-5 border-t border-purple-100">
                        <div className="flex items-start gap-2">
                            <div className="text-purple-400 mt-0.5 flex-shrink-0">
                                <IconStar />
                            </div>
                            <div className="flex-1 min-w-0">
                                <p className="text-[10px] sm:text-xs font-bold text-purple-600 uppercase tracking-wider mb-1">
                                    Favorite Quote
                                </p>
                                <p className="text-xs sm:text-sm text-gray-700 italic leading-relaxed">
                                    "{book.quotes}"
                                </p>
                            </div>
                        </div>
                    </div>
                )}
            </div>
        );

        // Book Form Component
        const BookForm = ({ book, onSave, onCancel, type }) => {
            const [formData, setFormData] = useState(
                book || { title: '', author: '', quotes: '', review: '', photo: null }
            );

            const handlePhotoUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setFormData({ ...formData, photo: reader.result });
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleSubmit = () => {
                if (!formData.title || !formData.author) {
                    alert("Please fill in both Title and Author fields.");
                    return;
                }
                onSave(formData);
            };

            return (
                <div className="max-w-2xl mx-auto p-4 sm:p-6 animate-slide-up">
                    <div className="bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-5 sm:p-8">
                        <h3 className="text-2xl sm:text-3xl font-display font-bold mb-6 sm:mb-8 gradient-text">
                            {book ? '‚úèÔ∏è Edit Book' : `üìö Add ${type === 'read' ? 'Book Read' : 'Reading Suggestion'}`}
                        </h3>

                        <div className="space-y-5 sm:space-y-6">
                            {/* Photo Upload */}
                            <div className="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6">
                                <label className="w-24 sm:w-32 h-32 sm:h-44 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl sm:rounded-2xl flex items-center justify-center overflow-hidden cursor-pointer border-2 border-dashed border-purple-300 hover:border-purple-500 transition-all book-cover flex-shrink-0 mx-auto sm:mx-0">
                                    {formData.photo ? (
                                        <img src={formData.photo} className="w-full h-full object-cover" alt="Book cover" />
                                    ) : (
                                        <div className="text-purple-400 text-center p-4">
                                            <IconBook />
                                            <span className="text-xs font-bold block mt-2">Add Cover</span>
                                        </div>
                                    )}
                                    <input 
                                        type="file" 
                                        className="hidden" 
                                        onChange={handlePhotoUpload}
                                        accept="image/*"
                                    />
                                </label>
                                <div className="flex-1 text-center sm:text-left">
                                    <p className="text-sm font-bold text-gray-700 mb-1">Book Cover Image</p>
                                    <p className="text-xs text-gray-500 leading-relaxed">
                                        Upload a beautiful cover image to make your library visually stunning
                                    </p>
                                </div>
                            </div>

                            {/* Title */}
                            <div>
                                <label className="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                    Book Title *
                                </label>
                                <input
                                    type="text"
                                    className="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none focus:border-purple-500 focus:bg-white transition-all text-sm sm:text-base"
                                    placeholder="e.g., The Alchemist"
                                    value={formData.title}
                                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                                />
                            </div>

                            {/* Author */}
                            <div>
                                <label className="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                    Author Name *
                                </label>
                                <input
                                    type="text"
                                    className="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none focus:border-purple-500 focus:bg-white transition-all text-sm sm:text-base"
                                    placeholder="e.g., Paulo Coelho"
                                    value={formData.author}
                                    onChange={(e) => setFormData({ ...formData, author: e.target.value })}
                                />
                            </div>

                            {/* Quotes (only for Books Read) */}
                            {type === 'read' && (
                                <div>
                                    <label className="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                        Favorite Quotes
                                    </label>
                                    <textarea
                                        className="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none focus:border-purple-500 focus:bg-white transition-all h-24 sm:h-28 resize-none text-sm sm:text-base"
                                        placeholder="Share the most memorable lines from this book..."
                                        value={formData.quotes}
                                        onChange={(e) => setFormData({ ...formData, quotes: e.target.value })}
                                    />
                                </div>
                            )}

                            {/* Review */}
                            <div>
                                <label className="block text-xs sm:text-sm font-bold text-gray-700 mb-2">
                                    {type === 'read' ? 'Your Review' : 'Why Read This?'}
                                </label>
                                <textarea
                                    className="w-full bg-gray-50 border-2 border-gray-200 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-3 sm:py-4 outline-none focus:border-purple-500 focus:bg-white transition-all h-32 sm:h-36 resize-none text-sm sm:text-base"
                                    placeholder={type === 'read' ? 
                                        "What did you think about this book? Share your thoughts..." : 
                                        "Why should you read this book? What makes it interesting?"
                                    }
                                    value={formData.review}
                                    onChange={(e) => setFormData({ ...formData, review: e.target.value })}
                                />
                            </div>

                            {/* Action Buttons */}
                            <div className="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2 sm:pt-4">
                                <button
                                    onClick={handleSubmit}
                                    className="flex-1 btn-primary text-white py-3.5 sm:py-4 rounded-xl sm:rounded-2xl font-bold shadow-lg text-sm sm:text-base"
                                >
                                    {book ? 'Update Book' : 'Save to Library'}
                                </button>
                                <button
                                    onClick={onCancel}
                                    className="px-6 sm:px-8 py-3.5 sm:py-4 rounded-xl sm:rounded-2xl font-bold text-gray-600 border-2 border-gray-300 hover:border-gray-400 transition-all text-sm sm:text-base"
                                >
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [showWelcome, setShowWelcome] = useState(() => {
                // Only show welcome screen on first visit
                const hasVisited = localStorage.getItem('aaditi_has_visited');
                return !hasVisited;
            });
            const [activeTab, setActiveTab] = useState('read'); // 'read' or 'suggestions'
            const [showForm, setShowForm] = useState(false);
            const [editingBook, setEditingBook] = useState(null);
            
            const [booksRead, setBooksRead] = useState(
                JSON.parse(localStorage.getItem('aaditi_books_read')) || []
            );
            const [suggestions, setSuggestions] = useState(
                JSON.parse(localStorage.getItem('aaditi_suggestions')) || []
            );

            useEffect(() => {
                localStorage.setItem('aaditi_books_read', JSON.stringify(booksRead));
            }, [booksRead]);

            useEffect(() => {
                localStorage.setItem('aaditi_suggestions', JSON.stringify(suggestions));
            }, [suggestions]);

            const handleStartApp = () => {
                localStorage.setItem('aaditi_has_visited', 'true');
                setShowWelcome(false);
            };

            const handleSaveBook = (bookData) => {
                const bookWithId = editingBook 
                    ? { ...bookData, id: editingBook.id }
                    : { ...bookData, id: Date.now() };

                if (activeTab === 'read') {
                    if (editingBook) {
                        setBooksRead(booksRead.map(b => b.id === editingBook.id ? bookWithId : b));
                    } else {
                        setBooksRead([bookWithId, ...booksRead]);
                    }
                } else {
                    if (editingBook) {
                        setSuggestions(suggestions.map(s => s.id === editingBook.id ? bookWithId : s));
                    } else {
                        setSuggestions([bookWithId, ...suggestions]);
                    }
                }

                setShowForm(false);
                setEditingBook(null);
            };

            const handleEditBook = (book) => {
                setEditingBook(book);
                setShowForm(true);
            };

            const handleDeleteBook = (id) => {
                if (window.confirm('Are you sure you want to delete this book?')) {
                    if (activeTab === 'read') {
                        setBooksRead(booksRead.filter(b => b.id !== id));
                    } else {
                        setSuggestions(suggestions.filter(s => s.id !== id));
                    }
                }
            };

            const handleAddNew = () => {
                setEditingBook(null);
                setShowForm(true);
            };

            const handleCancelForm = () => {
                setShowForm(false);
                setEditingBook(null);
            };

            if (showWelcome) {
                return <WelcomeScreen 
                    onStart={handleStartApp} 
                    booksReadCount={booksRead.length}
                    suggestionsCount={suggestions.length}
                />;
            }

            const currentBooks = activeTab === 'read' ? booksRead : suggestions;

            return (
                <div className="min-h-screen pb-24">
                    {/* Header */}
                    <header className="glass sticky top-0 z-40 shadow-lg">
                        <div className="max-w-6xl mx-auto px-4 sm:px-6 py-4 sm:py-5">
                            <div className="flex justify-between items-center mb-3 sm:mb-4">
                                <div>
                                    <h1 className="text-xl sm:text-2xl font-display font-bold gradient-text">
                                        Aaditi's Library
                                    </h1>
                                    <p className="text-[10px] sm:text-xs text-purple-600 font-semibold mt-0.5">
                                        Personal Book Collection
                                    </p>
                                </div>
                                {!showForm && (
                                    <button
                                        onClick={handleAddNew}
                                        className="btn-primary text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-xl font-bold shadow-lg flex items-center gap-1.5 sm:gap-2 text-sm sm:text-base"
                                    >
                                        <IconPlus />
                                        <span className="hidden xs:inline">Add Book</span>
                                        <span className="inline xs:hidden">Add</span>
                                    </button>
                                )}
                            </div>

                            {/* Tabs */}
                            {!showForm && (
                                <div className="flex gap-1.5 sm:gap-2 bg-gray-100 p-1 sm:p-1.5 rounded-xl sm:rounded-2xl relative">
                                    <div 
                                        className="absolute top-1 sm:top-1.5 bottom-1 sm:bottom-1.5 bg-white rounded-lg sm:rounded-xl shadow-md tab-indicator"
                                        style={{
                                            left: activeTab === 'read' ? '4px' : '50%',
                                            width: 'calc(50% - 4px)',
                                        }}
                                    />
                                    <button
                                        onClick={() => setActiveTab('read')}
                                        className={`flex-1 py-2.5 sm:py-3 px-2 sm:px-4 rounded-lg sm:rounded-xl font-bold text-xs sm:text-sm flex items-center justify-center gap-1.5 sm:gap-2 transition-colors relative z-10 ${
                                            activeTab === 'read' ? 'text-purple-600' : 'text-gray-500'
                                        }`}
                                    >
                                        <IconBookOpen />
                                        <span className="hidden sm:inline">Books Read ({booksRead.length})</span>
                                        <span className="inline sm:hidden">Read ({booksRead.length})</span>
                                    </button>
                                    <button
                                        onClick={() => setActiveTab('suggestions')}
                                        className={`flex-1 py-2.5 sm:py-3 px-2 sm:px-4 rounded-lg sm:rounded-xl font-bold text-xs sm:text-sm flex items-center justify-center gap-1.5 sm:gap-2 transition-colors relative z-10 ${
                                            activeTab === 'suggestions' ? 'text-purple-600' : 'text-gray-500'
                                        }`}
                                    >
                                        <IconLightbulb />
                                        <span className="hidden sm:inline">Reading List ({suggestions.length})</span>
                                        <span className="inline sm:hidden">List ({suggestions.length})</span>
                                    </button>
                                </div>
                            )}
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8">
                        {showForm ? (
                            <BookForm
                                book={editingBook}
                                onSave={handleSaveBook}
                                onCancel={handleCancelForm}
                                type={activeTab}
                            />
                        ) : (
                            <>
                                {currentBooks.length === 0 ? (
                                    <div className="text-center py-12 sm:py-20">
                                        <div className="bg-white rounded-2xl sm:rounded-3xl p-8 sm:p-12 max-w-md mx-auto shadow-lg">
                                            <div className="w-16 h-16 sm:w-20 sm:h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6">
                                                <div className="text-purple-400">
                                                    {activeTab === 'read' ? <IconBookOpen /> : <IconLightbulb />}
                                                </div>
                                            </div>
                                            <h3 className="text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-3">
                                                {activeTab === 'read' ? 'No Books Read Yet' : 'No Reading Suggestions'}
                                            </h3>
                                            <p className="text-sm sm:text-base text-gray-500 mb-5 sm:mb-6 leading-relaxed px-2">
                                                {activeTab === 'read' 
                                                    ? 'Start building your reading collection by adding your first book!' 
                                                    : 'Create a list of books you want to read in the future!'}
                                            </p>
                                            <button
                                                onClick={handleAddNew}
                                                className="btn-primary text-white px-6 sm:px-8 py-3 rounded-xl font-bold shadow-lg text-sm sm:text-base"
                                            >
                                                Add Your First Book
                                            </button>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
                                        {currentBooks.map(book => (
                                            <BookCard
                                                key={book.id}
                                                book={book}
                                                onEdit={handleEditBook}
                                                onDelete={handleDeleteBook}
                                                type={activeTab}
                                            />
                                        ))}
                                    </div>
                                )}
                            </>
                        )}
                    </main>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>